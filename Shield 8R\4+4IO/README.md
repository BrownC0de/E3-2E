# Модуль E3-2E 8R/4+4IO

<img src="/MainBoard/images/Shield_1.png" width="600">
Модуль представляет из себя 8 реле, подключенных через расширитель портов, с защитой транзисторами. И 8 дополнительных портов ввода\вывода.

Данный модуль отлично себя зарекомендовал для:
- Управления освещением. С подключением слаботочными проводами к  обычным включателей.  
Но имейте ввиду, реле на 5а - это максимум 1100вт , а у некоторых не сильно качественных светодиодных лампочек может быть очень высокий пусковой ток. Встречаються экземпляры у которых он превышает 100к1 от номинального потребления. То есть 15 вт лампочка, при включении потребляет 1500вт. Да, этот момоент очень кратковремнный, но этого времени достаточно что бы реле приказало долго жить. 
- Управления отоплением. 

#### Основные характеристики:
- 2 Порта цифровых ввода\вывода 
- 2 Порта цифровых ввода\вывода с возможностью подтяжки внешним резистором на 10к
- 4 Порта с опторязвязкой
- 8 Реле по 5а (1100вт)
- Для работы использует порт I2c-Shiled c основной платы. 

*Подтяжка внешним резистором нужна для стабильной работы датчиков и кнопок\включателей на больших расстояниях.*

 
<img src="/Shield%208R%5C4%2B4IO/PCB.png" width="600">
Некоторые пояснения.

- С7, С12 - Клемники используемые сверху, порты ввыода\вывода, с подтяжкой резистором 10к
- С5, С6 - Клемники с подключаемой опторазвязкой. 
- C13-C20 - Клемники для для реле. 

Адресация I2c
- Блок с пинами ввода\вывода имеет адрес 0x23
- Блок с реле - адрес 0x20
 

Перейдем к сборке. 
### Схемотехника
<img src="/Shield%208R%5C4%2B4IO/Schematic_E3-2E-8R4+4IO.png" width="1000">

***

Размеры и тип компонентов:
- K1-K8 - Реле ALDP105W [Ali],[ChipDip]
- U1-U2 - PCF8574T 8 канальные расширители портов [Ali],[ChipDip]
- D1 - Матрица Дарлингтона из восьми транзисторов [Ali],[ChipDip]
- D3 - 4х канальная транзисторная оптопара [Ali],[ChipDip]
- N1-N4 - Конденсаторы 0.1МкФ, размером 0805 [Ali],[ChipDip]
- R5-R8 - Резисторы номиналом 1к, размером 0805 [Ali],[ChipDip]
- R1, R4 - Резисторы номиналом 10к, размерность 1206 (В следующей версии переделаю на 0805) [Ali],[ChipDip]
- С13-С20 - Двойные клемники, 2,54 [Ali],[ChipDip]
- С7, С12, С5, С6 - Двойные клемники, 2,54 [Ali],[ChipDip]
- J - Гребенка из 2х пинов 2,54 [Ali],[ChipDip]
- H Гребенка из 3х пинов 2,54 [Ali],[ChipDip]
- I2c-Shield - Порт "мама" для гребенки из 5 пинов 2,54 [Ali],[ChipDip]



Для заказа компонентов: [Файл BOM](/MainBoard)

### Вариации при сборке:
Можно несколько упростить схему, если:
- Не нужна опторазвязка? Не распаиваем D3, R5-R8, N1-N4. Гребенку H паять все равно нужно. 
- Ну нужна подтяжка? Убираем R1, R4, J3, J4

***

### Прошивка EspHome
Примеры конфигурационных файлов под эту плату ниже: 
- Раз
- Два

### Сборка платы
При пайке, у новичков могут быть сложности из-за использования smd компонентов в размерности 0805 и плотности их расположения.

Сначала паять микросхемы, потом резисторы, потом уже все остальное. Реле что бы не мешалось паяеться в самом конце. 


