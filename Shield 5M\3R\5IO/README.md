# Модуль E3-2E 5M/3R/5IO

<img src="/MainBoard/images/Shield_2.png" width="600">
Дамнны модуль состоит из 5 полевых транзисторов (мофсетов) 3х реле, и 5 дополнительных входов\выходов

И отлично подходит для управления свтодиодным освещением. Например к нему можно подключить светодиодную ленты RGBWW, либо 5 отдельнгых одноцветных лент. 
Так же им отлично управляються моторы на 12вольт, к примеру для вытяжки, и благодря подключению через мосфет можно регулировать скорость вращения. 
3 Реле позволяет так же подключить любойю нагрузку, можностью до 1100вт. 
А 5 дополнительных входов\выходов разные датчики (двжения, присутсивя, открытия дверь) или кнопки\включатели. Благодря которым во первых получиться полностью автоматизировать включение света. А во вторых подключить оыбчные включатели, оставив привычную возможность управлять светом в ручную.

*Так же упомяну и здесь - имейте ввиду, реле на 5а это максимум 1100вт, а у некоторых не сильно качественных светодиодных лампочек может быть очень высокий пусковой ток. Встречаються экземпляры у которых он превышает 100к1 от номинального потребления. То есть 15 вт лампочка, при включении потребляет 1500вт. Да, этот момоент очень кратковремнный, но этого времени достаточно что бы реле приказало долго жить. Рекомендую использовать качественные лампы, например у икеи стартовые токи не привышают 5к1 от номинала, и в целом они отлтично себя зарекомендовали.*

#### Особенности:
- 3 Реле по 5а (1100вт максимум)
- 5 Мосфетов, для диммированя светодидных лент, или регулировки оборотов у моторов
- 5 Портов входа\выхода с возможностью подтяжки pulldown к резисторам в 10к
- Для работы использует порт I2c-Shiled и GPIO-Shielt c основной платы. 
- Выходы 2,4,12,14,15 с основной платы - используюься мофсетами. На них лучше нечего больше не подключать. 

*Подтяжка внешним резистором нужна для стабильной работы датчиков и кнопок\включателей на больших расстояниях.*

 
<img src="/Shield%205M%5C3R%5C5IO/PCB.png" width="600">
Некоторые пояснения.

- P3, С3 - Клемники порты ввыода\вывода, с возможностью подключения подтяжки резистором 10к к земле
- U2 - Вход для мосветов, это же напряжение удет на выходе на клемах P1, P2 
- С1, С19, С20 - Клемники для реле. 
-  Адрес I2c - 0x20
 

Перейдем к сборке. 
### Схемотехника
<img src="/Shield%205M%5C3R%5C5IO/Schematic_E3-2e-5M_3R_5IO.png" width="1000">

***

Размеры и тип компонентов:
- K1, К7, К8 - Реле ALDP105W [Ali],[ChipDip]
- U1 - PCF8574T 8 канальные расширители портов [Ali],[ChipDip]
- D1 - Матрица Дарлингтона из восьми транзисторов [Ali],[ChipDip]
- U2 - Двойноq клемник 5.0 [Ali],[ChipDip]
- P1, P2 - Тройные клемники 5.0 [Ali],[ChipDip]
- P3 - Тройной клемник 2.54 [Ali],[ChipDip]
- С1, C7, C19, C20 - Двойные клемники 2.54 [Ali],[ChipDip]
- Q1, Q2, Q3, Q4, Q5 - Мосфеты IRF3205 [Ali],[ChipDip]
- I2c-Shield Гребенка на 5 пинов, 2.54 [Ali],[ChipDip]
- GPIO-Shield Гребенка на 6 пинов, 2.54 [Ali],[ChipDip]
- R1, R2,R3,R5,R10 - Резисторы от 220 до 500 Ом, размером 0805 [Ali],[ChipDip]
- R4, R6, R7, R8, R9, R11, R12 ,R13, R14, R20  - Резисторы 10к, в размере 0805 [Ali],[ChipDip]
- J - Гребенка на 2 пина 2.54, с перемычкой [Ali],[ChipDip]

Для заказа компонентов: [Файл BOM](/MainBoard)

### Вариации при сборке:
Можно несколько упростить схему, если:
- Ну нужна подтяжка? Убираем R4, R11, R12, R13, R14 и J
- Вместо мосфета IRF3205 можно паять IRF520

***

### Прошивка EspHome
Примеры конфигурационных файлов под эту плату ниже: 
- Раз
- Два

### Сборка платы
При пайке, у новичков могут быть сложности из-за использования smd компонентов в размерности 0805 и плотности их расположения.

Сначала паять микросхемы, потом резисторы, потом уже все остальное. Реле и мосфеты удобно паять в самом конце. 


